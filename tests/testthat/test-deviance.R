test_that("deviance() works.", {
  fit <- SLOPE(abalone$x, abalone$y, family = "poisson", path_length = 20)
  d <- deviance(fit)
  expect_equivalent(
    d,
    c(
      4.91482299982145,
      4.72920135566456,
      4.64311710828605,
      4.6037342100444,
      4.58624590490983,
      4.52876910162601,
      4.49949055814563,
      4.48701183438493,
      4.47669153876776,
      4.46772616891691,
      4.46310895900944,
      4.46107248021948,
      4.46028150304589,
      4.45997967975514,
      4.45985779899957,
      4.45981127337313,
      4.45979355564674
    ),
    tolerance = 1e-3
  )
})
